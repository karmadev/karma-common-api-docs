{
  "openapi": "3.0.3",
  "info": {
    "title": "Karma Common API",
    "description": "## Overview\n\nThe Karma Common API provides RESTful access to Karma's core resources including inventory, orders, tabs, locations, and more.\n\n## Authentication\n\nAll API requests require authentication via API key:\n\n```\nX-API-Key: karma_live_your_api_key_here\n```\n\nAPI keys can be created and managed in the [Karma Merchant Dashboard](https://serve.karma.life).\n\n## Rate Limiting\n\nRate limits are applied per API key based on your subscription tier:\n- **Standard**: 1,000 requests/hour\n- **Premium**: 10,000 requests/hour\n- **Unlimited**: 100,000 requests/hour\n\nRate limit headers are included in all responses:\n- `X-RateLimit-Limit`: Total requests allowed\n- `X-RateLimit-Remaining`: Requests remaining\n- `X-RateLimit-Reset`: Unix timestamp when limit resets\n\n## Pagination\n\nList endpoints support pagination via query parameters:\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 20, max: 1000)\n\n## Errors\n\nAll errors follow a consistent format:\n```json\n{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable message\"\n  },\n  \"meta\": {\n    \"requestId\": \"req_xxx\",\n    \"timestamp\": \"2025-01-15T10:30:00.000Z\"\n  }\n}\n```",
    "version": "20260123-1001-1",
    "contact": {
      "name": "Karma Developer Support",
      "email": "developers@karma.life",
      "url": "https://karma.life"
    },
    "license": {
      "name": "Proprietary",
      "url": "https://karma.life/terms"
    }
  },
  "components": {
    "securitySchemes": {
      "apiKey": {
        "type": "apiKey",
        "name": "X-API-Key",
        "in": "header",
        "description": "API key for authentication"
      },
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token from Karma Merchant Web"
      }
    },
    "schemas": {}
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Internal"
        ],
        "description": "Simple health check endpoint. Returns basic status of database and Redis dependencies. Used for quick health verification.",
        "x-internal": true,
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "healthy",
                        "unhealthy"
                      ],
                      "description": "Overall service status"
                    },
                    "checks": {
                      "type": "object",
                      "properties": {
                        "database": {
                          "type": "boolean",
                          "description": "Database connectivity"
                        },
                        "redis": {
                          "type": "boolean",
                          "description": "Redis connectivity"
                        }
                      },
                      "required": [
                        "database",
                        "redis"
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Check timestamp"
                    }
                  },
                  "required": [
                    "status",
                    "checks",
                    "timestamp"
                  ]
                },
                "example": {
                  "status": "healthy",
                  "checks": {
                    "database": true,
                    "redis": true
                  },
                  "timestamp": "2025-01-15T10:30:00.000Z"
                }
              }
            }
          },
          "503": {
            "description": "Service is unhealthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "unhealthy"
                      ]
                    },
                    "checks": {
                      "type": "object",
                      "properties": {
                        "database": {
                          "type": "boolean"
                        },
                        "redis": {
                          "type": "boolean"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                },
                "example": {
                  "status": "unhealthy",
                  "checks": {
                    "database": true,
                    "redis": false
                  },
                  "timestamp": "2025-01-15T10:30:00.000Z"
                }
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": [
          "Internal"
        ],
        "description": "Kubernetes readiness probe with detailed dependency status. Returns response times and error details for each dependency. Use for determining if the service is ready to receive traffic.",
        "x-internal": true,
        "responses": {
          "200": {
            "description": "Service is ready to receive traffic",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "healthy",
                        "degraded",
                        "unhealthy"
                      ],
                      "description": "Overall status"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Check timestamp"
                    },
                    "uptime": {
                      "type": "number",
                      "description": "Service uptime in seconds"
                    },
                    "dependencies": {
                      "type": "object",
                      "properties": {
                        "database": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "healthy",
                                "unhealthy",
                                "degraded"
                              ],
                              "description": "Dependency health status"
                            },
                            "responseTimeMs": {
                              "type": "number",
                              "description": "Response time to check dependency in milliseconds"
                            },
                            "error": {
                              "type": "string",
                              "description": "Error message if unhealthy"
                            }
                          },
                          "required": [
                            "status"
                          ]
                        },
                        "redis": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "healthy",
                                "unhealthy",
                                "degraded"
                              ],
                              "description": "Dependency health status"
                            },
                            "responseTimeMs": {
                              "type": "number",
                              "description": "Response time to check dependency in milliseconds"
                            },
                            "error": {
                              "type": "string",
                              "description": "Error message if unhealthy"
                            }
                          },
                          "required": [
                            "status"
                          ]
                        }
                      },
                      "required": [
                        "database",
                        "redis"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "timestamp",
                    "uptime",
                    "dependencies"
                  ]
                },
                "example": {
                  "status": "healthy",
                  "timestamp": "2025-01-15T10:30:00.000Z",
                  "uptime": 3600,
                  "dependencies": {
                    "database": {
                      "status": "healthy",
                      "responseTimeMs": 5
                    },
                    "redis": {
                      "status": "healthy",
                      "responseTimeMs": 2
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service is not ready",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "degraded",
                        "unhealthy"
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "uptime": {
                      "type": "number"
                    },
                    "dependencies": {
                      "type": "object",
                      "properties": {
                        "database": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "healthy",
                                "unhealthy",
                                "degraded"
                              ],
                              "description": "Dependency health status"
                            },
                            "responseTimeMs": {
                              "type": "number",
                              "description": "Response time to check dependency in milliseconds"
                            },
                            "error": {
                              "type": "string",
                              "description": "Error message if unhealthy"
                            }
                          },
                          "required": [
                            "status"
                          ]
                        },
                        "redis": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "healthy",
                                "unhealthy",
                                "degraded"
                              ],
                              "description": "Dependency health status"
                            },
                            "responseTimeMs": {
                              "type": "number",
                              "description": "Response time to check dependency in milliseconds"
                            },
                            "error": {
                              "type": "string",
                              "description": "Error message if unhealthy"
                            }
                          },
                          "required": [
                            "status"
                          ]
                        }
                      }
                    }
                  }
                },
                "example": {
                  "status": "unhealthy",
                  "timestamp": "2025-01-15T10:30:00.000Z",
                  "uptime": 3600,
                  "dependencies": {
                    "database": {
                      "status": "healthy",
                      "responseTimeMs": 5
                    },
                    "redis": {
                      "status": "unhealthy",
                      "responseTimeMs": 1000,
                      "error": "Connection refused"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/live": {
      "get": {
        "tags": [
          "Internal"
        ],
        "description": "Kubernetes liveness probe. Lightweight check that the service process is running. Does not check external dependencies. Use to determine if the service should be restarted.",
        "x-internal": true,
        "responses": {
          "200": {
            "description": "Service is alive",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "alive"
                      ],
                      "description": "Process status"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Check timestamp"
                    },
                    "uptime": {
                      "type": "number",
                      "description": "Service uptime in seconds"
                    }
                  },
                  "required": [
                    "status",
                    "timestamp",
                    "uptime"
                  ]
                },
                "example": {
                  "status": "alive",
                  "timestamp": "2025-01-15T10:30:00.000Z",
                  "uptime": 3600
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inventory": {
      "get": {
        "summary": "List inventory items",
        "tags": [
          "Inventory"
        ],
        "description": "Retrieve a paginated list of inventory items with filtering and search capabilities\n\n**Permissions:** ðŸ”µ `inventory.read`",
        "parameters": [
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "locationId",
            "required": false,
            "description": "Filter by location ID"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "in": "query",
            "name": "page",
            "required": false,
            "description": "Page number"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Items per page"
          },
          {
            "schema": {
              "type": "string",
              "default": "title"
            },
            "in": "query",
            "name": "sort",
            "required": false,
            "description": "Field to sort by (title, basePrice, createdAt, etc.)"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            },
            "in": "query",
            "name": "order",
            "required": false,
            "description": "Sort order"
          },
          {
            "schema": {
              "type": "boolean",
              "default": false
            },
            "in": "query",
            "name": "deleted",
            "required": false,
            "description": "Include deleted items"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "search",
            "required": false,
            "description": "Search term for title/description"
          },
          {
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "in": "query",
            "name": "tags",
            "required": false,
            "description": "Filter by tags"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "itemType",
            "required": false,
            "description": "Filter by item type"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number",
                                "description": "Unique inventory item ID"
                              },
                              "locationId": {
                                "type": "number",
                                "description": "Location ID this item belongs to"
                              },
                              "title": {
                                "type": "string",
                                "description": "Item title/name"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true,
                                "description": "Item description"
                              },
                              "basePrice": {
                                "type": "number",
                                "nullable": true,
                                "description": "Base price in cents (deprecated - use calculatedPrice)"
                              },
                              "calculatedPrice": {
                                "type": "number",
                                "description": "Final calculated price in cents after applying all pricings"
                              },
                              "itemType": {
                                "type": "string",
                                "nullable": true,
                                "description": "Item type (food, beverage, etc.)"
                              },
                              "isAvailable": {
                                "type": "boolean",
                                "description": "Whether item is available for ordering"
                              },
                              "deleted": {
                                "type": "boolean",
                                "description": "Whether item is soft-deleted"
                              },
                              "madeToOrder": {
                                "type": "boolean",
                                "description": "Whether item is made to order"
                              },
                              "tags": {
                                "type": "object",
                                "description": "Item tags grouped by type"
                              },
                              "createdDate": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Creation timestamp"
                              },
                              "channelAvailability": {
                                "type": "object",
                                "description": "Channel availability flags",
                                "properties": {
                                  "online": {
                                    "type": "boolean",
                                    "description": "Available on online channel"
                                  },
                                  "qr": {
                                    "type": "boolean",
                                    "description": "Available on QR channel"
                                  },
                                  "kiosk": {
                                    "type": "boolean",
                                    "description": "Available on kiosk channel"
                                  },
                                  "pos": {
                                    "type": "boolean",
                                    "description": "Available on POS channel"
                                  }
                                }
                              }
                            },
                            "required": [
                              "id",
                              "locationId",
                              "title",
                              "deleted",
                              "createdDate",
                              "madeToOrder"
                            ]
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "number",
                              "minimum": 1
                            },
                            "limit": {
                              "type": "number",
                              "minimum": 1,
                              "maximum": 100
                            },
                            "total": {
                              "type": "number",
                              "minimum": 0
                            },
                            "totalPages": {
                              "type": "number",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "page",
                            "limit",
                            "total",
                            "totalPages"
                          ]
                        }
                      },
                      "required": [
                        "items",
                        "pagination"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create inventory item",
        "tags": [
          "Inventory"
        ],
        "description": "Add a new menu item or product to the inventory\n\n**Permissions:** ðŸŸ¢ `inventory.create`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "locationId": {
                    "type": "number",
                    "description": "Location ID"
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Item title"
                  },
                  "description": {
                    "type": "string",
                    "nullable": true,
                    "description": "Item description"
                  },
                  "basePrice": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Base price in cents"
                  },
                  "itemType": {
                    "type": "string",
                    "description": "Item type"
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Item tags"
                  }
                },
                "required": [
                  "locationId",
                  "title",
                  "basePrice",
                  "itemType"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number",
                          "description": "Unique inventory item ID"
                        },
                        "locationId": {
                          "type": "number",
                          "description": "Location ID this item belongs to"
                        },
                        "title": {
                          "type": "string",
                          "description": "Item title/name"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "description": "Item description"
                        },
                        "basePrice": {
                          "type": "number",
                          "nullable": true,
                          "description": "Base price in cents (deprecated - use calculatedPrice)"
                        },
                        "calculatedPrice": {
                          "type": "number",
                          "description": "Final calculated price in cents after applying all pricings"
                        },
                        "itemType": {
                          "type": "string",
                          "nullable": true,
                          "description": "Item type (food, beverage, etc.)"
                        },
                        "isAvailable": {
                          "type": "boolean",
                          "description": "Whether item is available for ordering"
                        },
                        "deleted": {
                          "type": "boolean",
                          "description": "Whether item is soft-deleted"
                        },
                        "madeToOrder": {
                          "type": "boolean",
                          "description": "Whether item is made to order"
                        },
                        "tags": {
                          "type": "object",
                          "description": "Item tags grouped by type"
                        },
                        "createdDate": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "channelAvailability": {
                          "type": "object",
                          "description": "Channel availability flags",
                          "properties": {
                            "online": {
                              "type": "boolean",
                              "description": "Available on online channel"
                            },
                            "qr": {
                              "type": "boolean",
                              "description": "Available on QR channel"
                            },
                            "kiosk": {
                              "type": "boolean",
                              "description": "Available on kiosk channel"
                            },
                            "pos": {
                              "type": "boolean",
                              "description": "Available on POS channel"
                            }
                          }
                        }
                      },
                      "required": [
                        "id",
                        "locationId",
                        "title",
                        "deleted",
                        "createdDate",
                        "madeToOrder"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inventory/{id}": {
      "get": {
        "summary": "Get inventory item",
        "tags": [
          "Inventory"
        ],
        "description": "Retrieve detailed information about a specific inventory item by its ID\n\n**Permissions:** ðŸ”µ `inventory.read`",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0-9]+$"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Inventory item ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number",
                          "description": "Unique inventory item ID"
                        },
                        "locationId": {
                          "type": "number",
                          "description": "Location ID this item belongs to"
                        },
                        "title": {
                          "type": "string",
                          "description": "Item title/name"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "description": "Item description"
                        },
                        "basePrice": {
                          "type": "number",
                          "nullable": true,
                          "description": "Base price in cents (deprecated - use calculatedPrice)"
                        },
                        "calculatedPrice": {
                          "type": "number",
                          "description": "Final calculated price in cents after applying all pricings"
                        },
                        "itemType": {
                          "type": "string",
                          "nullable": true,
                          "description": "Item type (food, beverage, etc.)"
                        },
                        "isAvailable": {
                          "type": "boolean",
                          "description": "Whether item is available for ordering"
                        },
                        "deleted": {
                          "type": "boolean",
                          "description": "Whether item is soft-deleted"
                        },
                        "madeToOrder": {
                          "type": "boolean",
                          "description": "Whether item is made to order"
                        },
                        "tags": {
                          "type": "object",
                          "description": "Item tags grouped by type"
                        },
                        "createdDate": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "channelAvailability": {
                          "type": "object",
                          "description": "Channel availability flags",
                          "properties": {
                            "online": {
                              "type": "boolean",
                              "description": "Available on online channel"
                            },
                            "qr": {
                              "type": "boolean",
                              "description": "Available on QR channel"
                            },
                            "kiosk": {
                              "type": "boolean",
                              "description": "Available on kiosk channel"
                            },
                            "pos": {
                              "type": "boolean",
                              "description": "Available on POS channel"
                            }
                          }
                        }
                      },
                      "required": [
                        "id",
                        "locationId",
                        "title",
                        "deleted",
                        "createdDate",
                        "madeToOrder"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update inventory item",
        "tags": [
          "Inventory"
        ],
        "description": "Modify an existing inventory item's details\n\n**Permissions:** ðŸŸ  `inventory.update`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "basePrice": {
                    "type": "number",
                    "minimum": 0
                  },
                  "itemType": {
                    "type": "string"
                  },
                  "available": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": true
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0-9]+$"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Inventory item ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number",
                          "description": "Unique inventory item ID"
                        },
                        "locationId": {
                          "type": "number",
                          "description": "Location ID this item belongs to"
                        },
                        "title": {
                          "type": "string",
                          "description": "Item title/name"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "description": "Item description"
                        },
                        "basePrice": {
                          "type": "number",
                          "nullable": true,
                          "description": "Base price in cents (deprecated - use calculatedPrice)"
                        },
                        "calculatedPrice": {
                          "type": "number",
                          "description": "Final calculated price in cents after applying all pricings"
                        },
                        "itemType": {
                          "type": "string",
                          "nullable": true,
                          "description": "Item type (food, beverage, etc.)"
                        },
                        "isAvailable": {
                          "type": "boolean",
                          "description": "Whether item is available for ordering"
                        },
                        "deleted": {
                          "type": "boolean",
                          "description": "Whether item is soft-deleted"
                        },
                        "madeToOrder": {
                          "type": "boolean",
                          "description": "Whether item is made to order"
                        },
                        "tags": {
                          "type": "object",
                          "description": "Item tags grouped by type"
                        },
                        "createdDate": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "channelAvailability": {
                          "type": "object",
                          "description": "Channel availability flags",
                          "properties": {
                            "online": {
                              "type": "boolean",
                              "description": "Available on online channel"
                            },
                            "qr": {
                              "type": "boolean",
                              "description": "Available on QR channel"
                            },
                            "kiosk": {
                              "type": "boolean",
                              "description": "Available on kiosk channel"
                            },
                            "pos": {
                              "type": "boolean",
                              "description": "Available on POS channel"
                            }
                          }
                        }
                      },
                      "required": [
                        "id",
                        "locationId",
                        "title",
                        "deleted",
                        "createdDate",
                        "madeToOrder"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete inventory item",
        "tags": [
          "Inventory"
        ],
        "description": "Soft-delete an inventory item (marks as deleted without removing from database)\n\n**Permissions:** ðŸ”´ `inventory.delete`",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0-9]+$"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Inventory item ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Item successfully deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": {
                          "type": "boolean"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inventory/{itemId}/availability": {
      "post": {
        "summary": "Toggle item availability",
        "tags": [
          "Inventory"
        ],
        "description": "Enable or disable an inventory item for customer ordering\n\n**Permissions:** ðŸŸ  `inventory.update`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "ACTIVATE",
                      "DEACTIVATE"
                    ],
                    "description": "Action to perform: ACTIVATE to make item available, DEACTIVATE to hide it"
                  }
                },
                "required": [
                  "action"
                ]
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0-9]+$"
            },
            "in": "path",
            "name": "itemId",
            "required": true,
            "description": "Inventory item ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "itemId": {
                          "type": "number",
                          "description": "Inventory item ID"
                        },
                        "action": {
                          "type": "string",
                          "enum": [
                            "ACTIVATE",
                            "DEACTIVATE"
                          ],
                          "description": "Action performed"
                        },
                        "isAvailable": {
                          "type": "boolean",
                          "description": "Current availability status"
                        }
                      },
                      "required": [
                        "itemId",
                        "action",
                        "isAvailable"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inventory/{id}/inheritance": {
      "put": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/v1/inventory/{id}/overrides": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/v1/inventory/validate": {
      "post": {
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "locationId",
                  "items"
                ],
                "properties": {
                  "locationId": {
                    "type": "number",
                    "minimum": 1
                  },
                  "items": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "itemId"
                      ],
                      "properties": {
                        "itemId": {
                          "type": "number",
                          "minimum": 1
                        },
                        "variants": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "required": [
                              "id"
                            ],
                            "additionalProperties": true,
                            "properties": {
                              "id": {
                                "type": "number",
                                "minimum": 1
                              },
                              "quantity": {
                                "type": "number",
                                "minimum": 0.01
                              }
                            }
                          }
                        },
                        "quantity": {
                          "type": "number",
                          "minimum": 1
                        },
                        "menuId": {
                          "type": "string"
                        }
                      }
                    }
                  },
                  "validateMenu": {
                    "type": "boolean"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Validation response containing valid and invalid items with nested variant structures",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "description": "Validation response containing valid and invalid items with nested variant structures"
                }
              }
            }
          },
          "400": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/create": {
      "post": {
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "locationId",
                  "order_channel",
                  "order_type",
                  "order_destination",
                  "items"
                ],
                "properties": {
                  "locationId": {
                    "type": "number"
                  },
                  "order_channel": {
                    "type": "string",
                    "enum": [
                      "ONLINE",
                      "QR",
                      "KIOSK",
                      "POS"
                    ],
                    "description": "Source of the order"
                  },
                  "order_type": {
                    "type": "string",
                    "enum": [
                      "TAKEAWAY",
                      "OTC",
                      "QR"
                    ],
                    "description": "Service model - TAKEAWAY, OTC (over the counter), QR (customer scanned QR code or POS table order)"
                  },
                  "order_destination": {
                    "type": "string",
                    "enum": [
                      "QR",
                      "TAB",
                      "KD",
                      "NONE"
                    ],
                    "description": "Where the order should be routed"
                  },
                  "order_destination_id": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "format": "uuid",
                    "description": "UUID of the destination (QR code, tab, or kitchen dispatch)"
                  },
                  "tab_member": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "description": "User identification for the order",
                    "properties": {
                      "id": {
                        "type": "number",
                        "description": "User ID (highest priority)"
                      },
                      "email": {
                        "type": "string",
                        "description": "Email address"
                      },
                      "phone": {
                        "type": "string",
                        "description": "Phone number"
                      },
                      "identifier": {
                        "type": "string",
                        "description": "Device identifier"
                      }
                    }
                  },
                  "items": {
                    "type": "array",
                    "minItems": 1,
                    "description": "Items to include in the order",
                    "items": {
                      "type": "object",
                      "required": [
                        "id",
                        "quantity_cents",
                        "variants",
                        "comments"
                      ],
                      "properties": {
                        "id": {
                          "type": "number",
                          "description": "Inventory item ID (renamed from item_id)"
                        },
                        "quantity_cents": {
                          "type": "number",
                          "minimum": 1,
                          "description": "Quantity in cents (e.g., 250 = 2.5 items)"
                        },
                        "price_cents": {
                          "type": [
                            "number",
                            "null"
                          ],
                          "description": "Price override in cents (POS only, renamed from price)"
                        },
                        "variants": {
                          "type": "array",
                          "description": "Variant modifications (supports recursive structure for item-based variants)",
                          "items": {
                            "type": "object",
                            "required": [
                              "id"
                            ],
                            "properties": {
                              "id": {
                                "type": "number",
                                "description": "Variant ID"
                              },
                              "quantity_cents": {
                                "type": "number",
                                "description": "Quantity in cents for this variant (default: 100 = 1x)",
                                "default": 100
                              },
                              "price_cents": {
                                "type": [
                                  "number",
                                  "null"
                                ],
                                "description": "Price override in cents (POS only, renamed from price)"
                              },
                              "comments": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "description": "Variant-specific comments"
                              },
                              "variants": {
                                "type": "array",
                                "description": "Sub-variants (recursive for item-based variants)",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "id"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "comments": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "Special instructions"
                        }
                      }
                    }
                  },
                  "vouchers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Voucher codes to apply"
                  },
                  "desiredPickupTime": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "description": "Unix timestamp for desired pickup time"
                  },
                  "hold": {
                    "type": "boolean",
                    "description": "If true, order will be held (not_sent) and not sent to kitchen automatically"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Order created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Order created successfully",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "kitchenDispatchId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "dailyOrderNumber": {
                          "type": "number"
                        },
                        "tabId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "tabMemberId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "kitchen_dispatch_item_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "item_id": {
                                "type": "number"
                              },
                              "quantity_cents": {
                                "type": "number",
                                "description": "Quantity in cents (100 = 1x)"
                              },
                              "price_cents": {
                                "type": "number",
                                "description": "Total price for this item in cents"
                              },
                              "variants": {
                                "type": "array",
                                "description": "Variants applied to this item",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "number",
                                      "description": "Variant ID"
                                    },
                                    "quantity_cents": {
                                      "type": "number",
                                      "description": "Variant quantity in cents"
                                    },
                                    "price_cents": {
                                      "type": [
                                        "null",
                                        "number"
                                      ],
                                      "description": "Price override in cents (null if not overridden)"
                                    }
                                  }
                                }
                              },
                              "status": {
                                "type": [
                                  "null",
                                  "string"
                                ],
                                "description": "Item status (null for new items)"
                              }
                            }
                          }
                        },
                        "totalAmount": {
                          "type": "number"
                        },
                        "discountAmount": {
                          "type": "number"
                        },
                        "finalAmount": {
                          "type": "number"
                        },
                        "appliedVouchers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "voucherCode": {
                                "type": "string"
                              },
                              "discountAmountCents": {
                                "type": "number"
                              },
                              "discountType": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "invalidVouchers": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "estimatedReadyTime": {
                          "type": [
                            "null",
                            "number"
                          ]
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{kitchenDispatchId}/cancel": {
      "post": {
        "summary": "Cancel order",
        "tags": [
          "Orders"
        ],
        "description": "Cancel a kitchen dispatch (order) by setting its state to aborted. Only early-stage orders can be cancelled.\n\n**Permissions:** ðŸŸ  `inventory.update`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "description": "Optional cancellation reason (for audit trail)"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "kitchenDispatchId",
            "required": true,
            "description": "Kitchen dispatch UUID to cancel"
          }
        ],
        "responses": {
          "200": {
            "description": "Order cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Order cancelled successfully",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "kitchenDispatchId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Kitchen dispatch UUID"
                        },
                        "previousState": {
                          "type": "string",
                          "description": "State before cancellation"
                        },
                        "newState": {
                          "type": "string",
                          "enum": [
                            "aborted"
                          ],
                          "description": "New state after cancellation"
                        },
                        "cancelledAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "ISO 8601 timestamp of cancellation"
                        },
                        "cancelledBy": {
                          "type": "number",
                          "description": "User ID who cancelled the order"
                        },
                        "reason": {
                          "type": "string",
                          "nullable": true,
                          "description": "Cancellation reason (if provided)"
                        },
                        "tabId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Tab UUID that the order belongs to"
                        }
                      },
                      "required": [
                        "kitchenDispatchId",
                        "previousState",
                        "newState",
                        "cancelledAt",
                        "cancelledBy",
                        "reason",
                        "tabId"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid state - Order cannot be cancelled in current state",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Invalid state - Order cannot be cancelled in current state",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "INVALID_STATE"
                          ]
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "properties": {
                            "currentState": {
                              "type": "string"
                            },
                            "cancellableStates": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid authentication",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Unauthorized - Missing or invalid authentication",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "MISSING_AUTH_CONTEXT",
                            "INVALID_API_KEY"
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions or scope violation",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Forbidden - Insufficient permissions or scope violation",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "INSUFFICIENT_PERMISSIONS",
                            "SCOPE_VIOLATION"
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Kitchen dispatch not found",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Kitchen dispatch not found",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "RESOURCE_NOT_FOUND"
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Internal Server Error",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "INTERNAL_SERVER_ERROR"
                          ]
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{orderId}/state": {
      "post": {
        "summary": "Update order state",
        "tags": [
          "Orders"
        ],
        "description": "Update the state of an order (kitchen dispatch).\n\n**Event Sourcing:**\n- Inserts an event into kitchen_dispatch_events table\n- PostgreSQL trigger automatically updates kitchen_dispatches.latest_state\n- Emits order.updated webhook for real-time UI updates\n\n**Valid State Transitions:**\n- `not_sent` â†’ pending, delivered, aborted\n- `pending` â†’ accepted, rejected, aborted\n- `scheduled` â†’ accepted, pending, aborted\n- `accepted` â†’ in_preparation, ready_to_deliver, aborted\n- `in_preparation` â†’ ready_to_deliver\n- `ready_to_deliver` â†’ delivered\n- `rejected` â†’ rejected_and_acknowledged\n- `staged_awaiting_payment` â†’ pending, aborted\n\n**Terminal States (no transitions):**\n- delivered, rejected_and_acknowledged, aborted\n\n**Idempotency:**\n- Calling with current state returns 200 success (no-op)\n- Safe for retries in distributed systems\n\n**Permissions:** ðŸŸ  `orders.update`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "state": {
                    "type": "string",
                    "enum": [
                      "not_sent",
                      "pending",
                      "accepted",
                      "in_preparation",
                      "ready_to_deliver",
                      "delivered",
                      "rejected",
                      "rejected_and_acknowledged",
                      "staged_awaiting_payment",
                      "scheduled",
                      "aborted"
                    ],
                    "description": "The new state to transition to"
                  }
                },
                "required": [
                  "state"
                ]
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "orderId",
            "required": true,
            "description": "Order ID (kitchen_dispatch.uuid)"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "orderId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Order ID (kitchen_dispatch.uuid)"
                        },
                        "previousState": {
                          "type": "string",
                          "description": "State before the update"
                        },
                        "newState": {
                          "type": "string",
                          "description": "State after the update"
                        },
                        "tabId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Associated tab ID"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Update timestamp"
                        },
                        "updatedBy": {
                          "type": "number",
                          "description": "User ID who made the update"
                        }
                      },
                      "required": [
                        "orderId",
                        "previousState",
                        "newState",
                        "tabId"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders": {
      "get": {
        "summary": "List orders",
        "tags": [
          "Orders"
        ],
        "description": "Retrieve a paginated list of orders with filtering capabilities.\n\n**Hybrid Dual-Fetch Architecture:**\n- PostgreSQL for recent orders (<30 minutes old) - ensures freshness\n- BigQuery for historical orders (>30 minutes old) - scalability\n- Automatic merge when date range spans both sources\n\n**KDS/Real-Time Mode:**\n- Use `forcePostgres=true` to always query PostgreSQL only\n- This ensures fresh state data for Kitchen Display Systems\n- Recommended for any real-time display needing immediate state updates\n\n**Default Behavior:**\n- Returns last 24 hours if no date filters specified\n- Sorted by created_at descending (newest first)\n- Items not included by default (use includeItems=true)\n\n**Performance Notes:**\n- BigQuery queries typically take 1-3 seconds\n- For real-time displays, use forcePostgres=true or /api/v1/orders/stream endpoint\n\n**Permissions:** ðŸ”µ `orders.read`",
        "parameters": [
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "in": "query",
            "name": "page",
            "required": false,
            "description": "Page number"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Items per page (max 1000)"
          },
          {
            "schema": {
              "type": "boolean",
              "default": false
            },
            "in": "query",
            "name": "includeItems",
            "required": false,
            "description": "Include order items in response. Items are returned FLAT with parentKitchenDispatchItemId for hierarchy building."
          },
          {
            "schema": {
              "type": "boolean",
              "default": false
            },
            "in": "query",
            "name": "forcePostgres",
            "required": false,
            "description": "Force PostgreSQL only (skip BigQuery). Use for KDS/real-time displays where state must be fresh."
          },
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "dailyOrderNumber",
            "required": false,
            "description": "Filter by daily order number"
          },
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ]
            },
            "in": "query",
            "name": "state",
            "required": false,
            "description": "Filter by state(s)"
          },
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ]
            },
            "in": "query",
            "name": "tabType",
            "required": false,
            "description": "Filter by tab type(s)"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "tableId",
            "required": false,
            "description": "Filter by table/QR code ID"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "tabMemberEmail",
            "required": false,
            "description": "Filter by tab member email (partial match)"
          },
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "minPrice",
            "required": false,
            "description": "Minimum total price in cents"
          },
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "maxPrice",
            "required": false,
            "description": "Maximum total price in cents"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "in": "query",
            "name": "startDate",
            "required": false,
            "description": "Filter orders created after this date (default: 24 hours ago)"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "in": "query",
            "name": "endDate",
            "required": false,
            "description": "Filter orders created before this date (default: now)"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "daily_ordinal_number",
                "updated_at"
              ],
              "default": "created_at"
            },
            "in": "query",
            "name": "sort",
            "required": false,
            "description": "Field to sort by"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "in": "query",
            "name": "order",
            "required": false,
            "description": "Sort order"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "uuid": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Unique order ID (kitchen_dispatch.uuid)"
                              },
                              "locationId": {
                                "type": "number",
                                "description": "Location ID"
                              },
                              "tabId": {
                                "type": "string",
                                "format": "uuid",
                                "nullable": true,
                                "description": "Associated tab ID"
                              },
                              "dailyOrderNumber": {
                                "type": "number",
                                "nullable": true,
                                "description": "Daily order number for the location"
                              },
                              "state": {
                                "type": "string",
                                "enum": [
                                  "not_sent",
                                  "pending",
                                  "accepted",
                                  "in_preparation",
                                  "ready_to_deliver",
                                  "delivered",
                                  "rejected",
                                  "rejected_and_acknowledged",
                                  "staged_awaiting_payment",
                                  "scheduled",
                                  "aborted"
                                ],
                                "description": "Current order state"
                              },
                              "orderType": {
                                "type": "string",
                                "enum": [
                                  "TAKEAWAY",
                                  "OTC",
                                  "QR",
                                  "TABLE"
                                ],
                                "nullable": true,
                                "description": "Order type"
                              },
                              "orderChannel": {
                                "type": "string",
                                "enum": [
                                  "ONLINE",
                                  "QR",
                                  "KIOSK",
                                  "POS"
                                ],
                                "nullable": true,
                                "description": "Order channel"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Last update timestamp"
                              },
                              "completedAt": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true,
                                "description": "Completion timestamp"
                              },
                              "tabType": {
                                "type": "string",
                                "nullable": true,
                                "description": "Tab type (table, takeaway, etc.)"
                              },
                              "storefrontQrCodeId": {
                                "type": "string",
                                "nullable": true,
                                "description": "Table UUID (storefront QR code ID) - frontend maps to name"
                              },
                              "tabMemberEmail": {
                                "type": "string",
                                "format": "email",
                                "nullable": true,
                                "description": "Tab member email"
                              },
                              "tabMemberName": {
                                "type": "string",
                                "nullable": true,
                                "description": "Tab member name"
                              },
                              "totalPrice": {
                                "type": "number",
                                "nullable": true,
                                "description": "Total price in cents"
                              },
                              "itemCount": {
                                "type": "number",
                                "nullable": true,
                                "description": "Number of items in order"
                              },
                              "message": {
                                "type": "string",
                                "nullable": true,
                                "description": "Order message/notes"
                              },
                              "source": {
                                "type": "string",
                                "nullable": true,
                                "description": "Order source"
                              },
                              "items": {
                                "type": "array",
                                "nullable": true,
                                "items": {
                                  "type": "object",
                                  "additionalProperties": true,
                                  "properties": {
                                    "uuid": {
                                      "type": "string",
                                      "format": "uuid",
                                      "description": "Unique order item ID"
                                    },
                                    "itemId": {
                                      "type": "number",
                                      "nullable": true,
                                      "description": "Inventory item ID"
                                    },
                                    "title": {
                                      "type": "string",
                                      "nullable": true,
                                      "description": "Item title"
                                    },
                                    "titlePrep": {
                                      "type": "string",
                                      "nullable": true,
                                      "description": "Kitchen prep title for KDS display - use instead of title if set"
                                    },
                                    "quantity": {
                                      "type": "number",
                                      "description": "Quantity (integer)"
                                    },
                                    "quantityCents": {
                                      "type": "number",
                                      "description": "Quantity in cents (e.g., 200 = 2x)"
                                    },
                                    "price": {
                                      "type": "number",
                                      "description": "Total price in cents"
                                    },
                                    "basePrice": {
                                      "type": "number",
                                      "description": "Base price in cents before discounts"
                                    },
                                    "discount": {
                                      "type": "number",
                                      "nullable": true,
                                      "description": "Discount amount in cents"
                                    },
                                    "status": {
                                      "type": "string",
                                      "nullable": true,
                                      "description": "Item status"
                                    },
                                    "comments": {},
                                    "variants": {
                                      "type": "array",
                                      "nullable": true,
                                      "description": "Variant/modification data for this item",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "id": {
                                            "type": "number",
                                            "description": "Variant ID"
                                          },
                                          "name": {
                                            "type": "string",
                                            "description": "Variant name"
                                          },
                                          "price": {
                                            "type": "number",
                                            "nullable": true,
                                            "description": "Variant price in cents"
                                          },
                                          "quantityCents": {
                                            "type": "number",
                                            "nullable": true,
                                            "description": "Quantity in cents"
                                          },
                                          "priceCents": {
                                            "type": "number",
                                            "nullable": true,
                                            "description": "Price in cents"
                                          },
                                          "modification_id": {
                                            "type": "number",
                                            "description": "Modification ID for completion tracking"
                                          },
                                          "status": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "Modification status"
                                          }
                                        }
                                      }
                                    },
                                    "tabMemberId": {
                                      "type": "string",
                                      "format": "uuid",
                                      "nullable": true,
                                      "description": "Tab member who owns this item"
                                    },
                                    "createdAt": {
                                      "type": "string",
                                      "format": "date-time",
                                      "description": "Creation timestamp"
                                    },
                                    "servingCenterId": {
                                      "type": "number",
                                      "nullable": true,
                                      "description": "Serving center ID for this item"
                                    },
                                    "tabMemberEmail": {
                                      "type": "string",
                                      "format": "email",
                                      "nullable": true,
                                      "description": "Tab member email"
                                    },
                                    "tabMemberName": {
                                      "type": "string",
                                      "nullable": true,
                                      "description": "Tab member name"
                                    },
                                    "parentKitchenDispatchItemId": {
                                      "type": "string",
                                      "format": "uuid",
                                      "nullable": true,
                                      "description": "Parent item UUID - if set, this is a child/modifier item. Use this to build hierarchy in frontend."
                                    }
                                  },
                                  "required": [
                                    "uuid",
                                    "quantity",
                                    "quantityCents",
                                    "price",
                                    "basePrice",
                                    "createdAt"
                                  ]
                                },
                                "description": "Order items (only when includeItems=true)"
                              },
                              "events": {
                                "type": "array",
                                "description": "Order state change history",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "event": {
                                      "type": "string",
                                      "description": "Event/state name"
                                    },
                                    "created_at": {
                                      "type": "string",
                                      "format": "date-time",
                                      "description": "Event timestamp"
                                    }
                                  },
                                  "required": [
                                    "event",
                                    "created_at"
                                  ]
                                }
                              },
                              "desiredPickupTime": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true,
                                "description": "Desired pickup time for scheduled orders"
                              },
                              "storeCommitmentTimeout": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true,
                                "description": "Store commitment timeout for acceptance"
                              }
                            },
                            "required": [
                              "uuid",
                              "locationId",
                              "state",
                              "createdAt",
                              "updatedAt"
                            ]
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "number",
                              "minimum": 1
                            },
                            "limit": {
                              "type": "number",
                              "minimum": 1,
                              "maximum": 100
                            },
                            "total": {
                              "type": "number",
                              "minimum": 0
                            },
                            "totalPages": {
                              "type": "number",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "page",
                            "limit",
                            "total",
                            "totalPages"
                          ]
                        }
                      },
                      "required": [
                        "items",
                        "pagination"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/stream": {
      "get": {
        "summary": "Stream orders (SSE)",
        "tags": [
          "Orders"
        ],
        "description": "Stream orders using Server-Sent Events for real-time displays.\n\n**Use Case:** Kitchen Display Systems (KDS) and real-time dashboards where latency matters.\n\n**How It Works:**\n1. PostgreSQL results are sent first (~100ms) - recent orders\n2. BigQuery results follow when ready (~1-3 seconds) - historical orders\n3. Completion event sent when all data is received\n\n**SSE Events:**\n- `postgres`: Orders from PostgreSQL (recent data)\n- `bigquery`: Orders from BigQuery (historical data)\n- `error`: Error from a specific source\n- `complete`: All data has been sent\n\n**Client Example:**\n```javascript\nconst eventSource = new EventSource('/api/v1/orders/stream?limit=1000')\n\neventSource.addEventListener('postgres', (e) => {\n  const { orders } = JSON.parse(e.data)\n  // Show recent orders immediately!\n  setOrders(prev => mergeAndSort([...prev, ...orders]))\n})\n\neventSource.addEventListener('bigquery', (e) => {\n  const { orders } = JSON.parse(e.data)\n  // Fill in historical orders\n  setOrders(prev => mergeAndSort([...prev, ...orders]))\n})\n\neventSource.addEventListener('complete', () => {\n  eventSource.close()\n})\n```\n\n**Headers Required:**\n- `Accept: text/event-stream`\n- `X-Location-Id: {locationId}`\n\n**Permissions:** ðŸ”µ `orders.read`",
        "parameters": [
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "in": "query",
            "name": "page",
            "required": false,
            "description": "Page number"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Items per page (max 1000)"
          },
          {
            "schema": {
              "type": "boolean",
              "default": false
            },
            "in": "query",
            "name": "includeItems",
            "required": false,
            "description": "Include order items in response. Items are returned FLAT with parentKitchenDispatchItemId for hierarchy building."
          },
          {
            "schema": {
              "type": "boolean",
              "default": false
            },
            "in": "query",
            "name": "forcePostgres",
            "required": false,
            "description": "Force PostgreSQL only (skip BigQuery). Use for KDS/real-time displays where state must be fresh."
          },
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "dailyOrderNumber",
            "required": false,
            "description": "Filter by daily order number"
          },
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ]
            },
            "in": "query",
            "name": "state",
            "required": false,
            "description": "Filter by state(s)"
          },
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ]
            },
            "in": "query",
            "name": "tabType",
            "required": false,
            "description": "Filter by tab type(s)"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "tableId",
            "required": false,
            "description": "Filter by table/QR code ID"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "tabMemberEmail",
            "required": false,
            "description": "Filter by tab member email (partial match)"
          },
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "minPrice",
            "required": false,
            "description": "Minimum total price in cents"
          },
          {
            "schema": {
              "type": "number"
            },
            "in": "query",
            "name": "maxPrice",
            "required": false,
            "description": "Maximum total price in cents"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "in": "query",
            "name": "startDate",
            "required": false,
            "description": "Filter orders created after this date (default: 24 hours ago)"
          },
          {
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "in": "query",
            "name": "endDate",
            "required": false,
            "description": "Filter orders created before this date (default: now)"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "daily_ordinal_number",
                "updated_at"
              ],
              "default": "created_at"
            },
            "in": "query",
            "name": "sort",
            "required": false,
            "description": "Field to sort by"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "in": "query",
            "name": "order",
            "required": false,
            "description": "Sort order"
          }
        ],
        "responses": {
          "200": {
            "description": "Server-Sent Events stream (text/event-stream)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "description": "Server-Sent Events stream (text/event-stream)"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{orderId}": {
      "get": {
        "summary": "Get order by ID",
        "tags": [
          "Orders"
        ],
        "description": "Retrieve detailed information about a specific order including all items.\n\nItems are always included in the response for single order queries.\n\n**Permissions:** ðŸ”µ `orders.read`",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "orderId",
            "required": true,
            "description": "Order ID (kitchen_dispatch.uuid)"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "uuid": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Unique order ID (kitchen_dispatch.uuid)"
                        },
                        "locationId": {
                          "type": "number",
                          "description": "Location ID"
                        },
                        "tabId": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true,
                          "description": "Associated tab ID"
                        },
                        "dailyOrderNumber": {
                          "type": "number",
                          "nullable": true,
                          "description": "Daily order number for the location"
                        },
                        "state": {
                          "type": "string",
                          "enum": [
                            "not_sent",
                            "pending",
                            "accepted",
                            "in_preparation",
                            "ready_to_deliver",
                            "delivered",
                            "rejected",
                            "rejected_and_acknowledged",
                            "staged_awaiting_payment",
                            "scheduled",
                            "aborted"
                          ],
                          "description": "Current order state"
                        },
                        "orderType": {
                          "type": "string",
                          "enum": [
                            "TAKEAWAY",
                            "OTC",
                            "QR",
                            "TABLE"
                          ],
                          "nullable": true,
                          "description": "Order type"
                        },
                        "orderChannel": {
                          "type": "string",
                          "enum": [
                            "ONLINE",
                            "QR",
                            "KIOSK",
                            "POS"
                          ],
                          "nullable": true,
                          "description": "Order channel"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Last update timestamp"
                        },
                        "completedAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true,
                          "description": "Completion timestamp"
                        },
                        "tabType": {
                          "type": "string",
                          "nullable": true,
                          "description": "Tab type (table, takeaway, etc.)"
                        },
                        "storefrontQrCodeId": {
                          "type": "string",
                          "nullable": true,
                          "description": "Table UUID (storefront QR code ID) - frontend maps to name"
                        },
                        "tabMemberEmail": {
                          "type": "string",
                          "format": "email",
                          "nullable": true,
                          "description": "Tab member email"
                        },
                        "tabMemberName": {
                          "type": "string",
                          "nullable": true,
                          "description": "Tab member name"
                        },
                        "totalPrice": {
                          "type": "number",
                          "nullable": true,
                          "description": "Total price in cents"
                        },
                        "itemCount": {
                          "type": "number",
                          "nullable": true,
                          "description": "Number of items in order"
                        },
                        "message": {
                          "type": "string",
                          "nullable": true,
                          "description": "Order message/notes"
                        },
                        "source": {
                          "type": "string",
                          "nullable": true,
                          "description": "Order source"
                        },
                        "items": {
                          "type": "array",
                          "nullable": true,
                          "items": {
                            "type": "object",
                            "additionalProperties": true,
                            "properties": {
                              "uuid": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Unique order item ID"
                              },
                              "itemId": {
                                "type": "number",
                                "nullable": true,
                                "description": "Inventory item ID"
                              },
                              "title": {
                                "type": "string",
                                "nullable": true,
                                "description": "Item title"
                              },
                              "titlePrep": {
                                "type": "string",
                                "nullable": true,
                                "description": "Kitchen prep title for KDS display - use instead of title if set"
                              },
                              "quantity": {
                                "type": "number",
                                "description": "Quantity (integer)"
                              },
                              "quantityCents": {
                                "type": "number",
                                "description": "Quantity in cents (e.g., 200 = 2x)"
                              },
                              "price": {
                                "type": "number",
                                "description": "Total price in cents"
                              },
                              "basePrice": {
                                "type": "number",
                                "description": "Base price in cents before discounts"
                              },
                              "discount": {
                                "type": "number",
                                "nullable": true,
                                "description": "Discount amount in cents"
                              },
                              "status": {
                                "type": "string",
                                "nullable": true,
                                "description": "Item status"
                              },
                              "comments": {},
                              "variants": {
                                "type": "array",
                                "nullable": true,
                                "description": "Variant/modification data for this item",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "number",
                                      "description": "Variant ID"
                                    },
                                    "name": {
                                      "type": "string",
                                      "description": "Variant name"
                                    },
                                    "price": {
                                      "type": "number",
                                      "nullable": true,
                                      "description": "Variant price in cents"
                                    },
                                    "quantityCents": {
                                      "type": "number",
                                      "nullable": true,
                                      "description": "Quantity in cents"
                                    },
                                    "priceCents": {
                                      "type": "number",
                                      "nullable": true,
                                      "description": "Price in cents"
                                    },
                                    "modification_id": {
                                      "type": "number",
                                      "description": "Modification ID for completion tracking"
                                    },
                                    "status": {
                                      "type": "string",
                                      "nullable": true,
                                      "description": "Modification status"
                                    }
                                  }
                                }
                              },
                              "tabMemberId": {
                                "type": "string",
                                "format": "uuid",
                                "nullable": true,
                                "description": "Tab member who owns this item"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Creation timestamp"
                              },
                              "servingCenterId": {
                                "type": "number",
                                "nullable": true,
                                "description": "Serving center ID for this item"
                              },
                              "tabMemberEmail": {
                                "type": "string",
                                "format": "email",
                                "nullable": true,
                                "description": "Tab member email"
                              },
                              "tabMemberName": {
                                "type": "string",
                                "nullable": true,
                                "description": "Tab member name"
                              },
                              "parentKitchenDispatchItemId": {
                                "type": "string",
                                "format": "uuid",
                                "nullable": true,
                                "description": "Parent item UUID - if set, this is a child/modifier item. Use this to build hierarchy in frontend."
                              }
                            },
                            "required": [
                              "uuid",
                              "quantity",
                              "quantityCents",
                              "price",
                              "basePrice",
                              "createdAt"
                            ]
                          },
                          "description": "Order items (only when includeItems=true)"
                        },
                        "events": {
                          "type": "array",
                          "description": "Order state change history",
                          "items": {
                            "type": "object",
                            "properties": {
                              "event": {
                                "type": "string",
                                "description": "Event/state name"
                              },
                              "created_at": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Event timestamp"
                              }
                            },
                            "required": [
                              "event",
                              "created_at"
                            ]
                          }
                        },
                        "desiredPickupTime": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true,
                          "description": "Desired pickup time for scheduled orders"
                        },
                        "storeCommitmentTimeout": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true,
                          "description": "Store commitment timeout for acceptance"
                        }
                      },
                      "required": [
                        "uuid",
                        "locationId",
                        "state",
                        "createdAt",
                        "updatedAt"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{orderId}/items/{itemId}/status": {
      "post": {
        "tags": [
          "orders"
        ],
        "description": "Update the status of a kitchen dispatch item or modification",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "nullable": true,
                    "enum": [
                      "COMPLETED",
                      "UNAVAILABLE",
                      null
                    ],
                    "description": "Item status: COMPLETED, UNAVAILABLE, or null (reset)"
                  },
                  "modificationId": {
                    "type": "number",
                    "description": "If provided, update this modification (variant) instead of the item"
                  },
                  "retailerUserId": {
                    "type": "number",
                    "description": "User ID making the change (for audit trail)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "orderId",
            "required": true,
            "description": "Kitchen dispatch (order) UUID"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "itemId",
            "required": true,
            "description": "Kitchen dispatch item UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "Status updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Status updated successfully",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean"
                        },
                        "itemId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "status": {
                          "type": "string",
                          "nullable": true,
                          "enum": [
                            "COMPLETED",
                            "UNAVAILABLE",
                            null
                          ],
                          "description": "Item status: COMPLETED, UNAVAILABLE, or null (reset)"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{orderId}/items/status": {
      "post": {
        "tags": [
          "orders"
        ],
        "description": "Batch update the status of multiple kitchen dispatch items and/or modifications",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "updates"
                ],
                "properties": {
                  "updates": {
                    "type": "array",
                    "minItems": 1,
                    "description": "Array of status updates",
                    "items": {
                      "type": "object",
                      "required": [
                        "id",
                        "status"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "Item UUID or modification ID (as string)"
                        },
                        "status": {
                          "type": "string",
                          "nullable": true,
                          "enum": [
                            "COMPLETED",
                            "UNAVAILABLE",
                            null
                          ],
                          "description": "Item status: COMPLETED, UNAVAILABLE, or null (reset)"
                        },
                        "isModification": {
                          "type": "boolean",
                          "description": "True if this is a modification (variant), not an item"
                        }
                      }
                    }
                  },
                  "retailerUserId": {
                    "type": "number",
                    "description": "User ID making the changes (for audit trail)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "orderId",
            "required": true,
            "description": "Kitchen dispatch (order) UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "Batch update completed",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Batch update completed",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean",
                          "description": "True if all updates succeeded"
                        },
                        "updatedCount": {
                          "type": "number",
                          "description": "Number of successfully updated items"
                        },
                        "failedItems": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "description": "Item or modification ID"
                              },
                              "isModification": {
                                "type": "boolean",
                                "description": "True if this is a modification (variant)"
                              },
                              "error": {
                                "type": "string",
                                "description": "Error message"
                              }
                            }
                          },
                          "description": "Items that failed to update"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/orders/{orderId}/items/{itemId}/status/logs": {
      "get": {
        "tags": [
          "orders"
        ],
        "description": "Get the status change history for a kitchen dispatch item",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "orderId",
            "required": true,
            "description": "Kitchen dispatch (order) UUID"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "itemId",
            "required": true,
            "description": "Kitchen dispatch item UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "Status logs retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Status logs retrieved successfully",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "logs": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number",
                                "description": "Log entry ID"
                              },
                              "itemId": {
                                "type": "string",
                                "description": "Item or modification ID"
                              },
                              "status": {
                                "type": "string",
                                "nullable": true,
                                "enum": [
                                  "COMPLETED",
                                  "UNAVAILABLE",
                                  null
                                ],
                                "description": "Item status: COMPLETED, UNAVAILABLE, or null (reset)"
                              },
                              "isModification": {
                                "type": "boolean",
                                "description": "True if this was a modification update"
                              },
                              "retailerUserId": {
                                "type": "string",
                                "nullable": true,
                                "description": "User who made the change"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "When the status was changed"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              }
                            }
                          }
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/subscriptions": {
      "get": {
        "summary": "List webhook subscriptions",
        "tags": [
          "Webhooks"
        ],
        "description": "List webhook subscriptions with optional filtering\n\n**Permissions:** ðŸ”µ `webhooks.read`",
        "parameters": [
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "in": "query",
            "name": "page",
            "required": false,
            "description": "Page number"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Items per page"
          },
          {
            "schema": {
              "type": "boolean"
            },
            "in": "query",
            "name": "active",
            "required": false,
            "description": "Filter by active status"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "event",
            "required": false,
            "description": "Filter by event type"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "subscriptions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "description": "Unique subscription ID"
                              },
                              "url": {
                                "type": "string",
                                "format": "uri",
                                "description": "Webhook URL endpoint"
                              },
                              "events": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "description": "List of event types to subscribe to (e.g., \"inventory.created\", \"order.completed\")"
                              },
                              "secret": {
                                "type": "string",
                                "description": "Webhook secret for signature verification"
                              },
                              "active": {
                                "type": "boolean",
                                "description": "Whether subscription is active"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Creation timestamp"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Last update timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "url",
                              "events",
                              "active",
                              "createdAt",
                              "updatedAt"
                            ]
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "number",
                              "minimum": 1
                            },
                            "limit": {
                              "type": "number",
                              "minimum": 1,
                              "maximum": 100
                            },
                            "total": {
                              "type": "number",
                              "minimum": 0
                            },
                            "totalPages": {
                              "type": "number",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "page",
                            "limit",
                            "total",
                            "totalPages"
                          ]
                        }
                      },
                      "required": [
                        "subscriptions",
                        "pagination"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create webhook subscription",
        "tags": [
          "Webhooks"
        ],
        "description": "Create a new webhook subscription\n\n**Permissions:** ðŸŸ¢ `webhooks.create`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "pattern": "^https://",
                    "description": "Webhook URL (must be HTTPS)"
                  },
                  "events": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "description": "List of event types to subscribe to"
                  },
                  "secret": {
                    "type": "string",
                    "minLength": 16,
                    "description": "Webhook secret for signature verification (min 16 characters)"
                  },
                  "active": {
                    "type": "boolean",
                    "default": true,
                    "description": "Whether subscription is active"
                  }
                },
                "required": [
                  "url",
                  "events",
                  "secret"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "Unique subscription ID"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri",
                          "description": "Webhook URL endpoint"
                        },
                        "events": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "List of event types to subscribe to (e.g., \"inventory.created\", \"order.completed\")"
                        },
                        "secret": {
                          "type": "string",
                          "description": "Webhook secret for signature verification"
                        },
                        "active": {
                          "type": "boolean",
                          "description": "Whether subscription is active"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Last update timestamp"
                        }
                      },
                      "required": [
                        "id",
                        "url",
                        "events",
                        "active",
                        "createdAt",
                        "updatedAt"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/subscriptions/{id}": {
      "get": {
        "summary": "Get webhook subscription",
        "tags": [
          "Webhooks"
        ],
        "description": "Get a single webhook subscription by ID\n\n**Permissions:** ðŸ”µ `webhooks.read`",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Webhook subscription ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "Unique subscription ID"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri",
                          "description": "Webhook URL endpoint"
                        },
                        "events": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "List of event types to subscribe to (e.g., \"inventory.created\", \"order.completed\")"
                        },
                        "secret": {
                          "type": "string",
                          "description": "Webhook secret for signature verification"
                        },
                        "active": {
                          "type": "boolean",
                          "description": "Whether subscription is active"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Last update timestamp"
                        }
                      },
                      "required": [
                        "id",
                        "url",
                        "events",
                        "active",
                        "createdAt",
                        "updatedAt"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update webhook subscription",
        "tags": [
          "Webhooks"
        ],
        "description": "Update an existing webhook subscription\n\n**Permissions:** ðŸŸ  `webhooks.update`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "pattern": "^https://"
                  },
                  "events": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1
                  },
                  "secret": {
                    "type": "string",
                    "minLength": 16
                  },
                  "active": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Webhook subscription ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "Unique subscription ID"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri",
                          "description": "Webhook URL endpoint"
                        },
                        "events": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "List of event types to subscribe to (e.g., \"inventory.created\", \"order.completed\")"
                        },
                        "secret": {
                          "type": "string",
                          "description": "Webhook secret for signature verification"
                        },
                        "active": {
                          "type": "boolean",
                          "description": "Whether subscription is active"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Creation timestamp"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Last update timestamp"
                        }
                      },
                      "required": [
                        "id",
                        "url",
                        "events",
                        "active",
                        "createdAt",
                        "updatedAt"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete webhook subscription",
        "tags": [
          "Webhooks"
        ],
        "description": "Delete a webhook subscription\n\n**Permissions:** ðŸ”´ `webhooks.delete`",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Webhook subscription ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription successfully deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": {
                          "type": "boolean"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/logs": {
      "get": {
        "summary": "List webhook logs",
        "tags": [
          "Webhooks"
        ],
        "description": "List webhook delivery logs with optional filtering",
        "parameters": [
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            },
            "in": "query",
            "name": "page",
            "required": false,
            "description": "Page number"
          },
          {
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Items per page"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "subscriptionId",
            "required": false,
            "description": "Filter by subscription ID"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "event",
            "required": false,
            "description": "Filter by event type"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "success",
                "failed",
                "retrying"
              ]
            },
            "in": "query",
            "name": "status",
            "required": false,
            "description": "Filter by delivery status"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "resourceId",
            "required": false,
            "description": "Filter by resource ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "logs": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "description": "Unique log ID"
                              },
                              "subscriptionId": {
                                "type": "string",
                                "description": "Subscription ID"
                              },
                              "event": {
                                "type": "string",
                                "description": "Event type that triggered webhook"
                              },
                              "resourceId": {
                                "type": "string",
                                "description": "ID of the resource that changed"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "pending",
                                  "success",
                                  "failed",
                                  "retrying"
                                ],
                                "description": "Delivery status"
                              },
                              "attempts": {
                                "type": "number",
                                "description": "Number of delivery attempts"
                              },
                              "responseCode": {
                                "type": "number",
                                "nullable": true,
                                "description": "HTTP response code from webhook endpoint"
                              },
                              "errorMessage": {
                                "type": "string",
                                "nullable": true,
                                "description": "Error message if delivery failed"
                              },
                              "deliveredAt": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true,
                                "description": "Successful delivery timestamp"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Creation timestamp"
                              }
                            },
                            "required": [
                              "id",
                              "subscriptionId",
                              "event",
                              "resourceId",
                              "status",
                              "attempts",
                              "createdAt"
                            ]
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "number",
                              "minimum": 1
                            },
                            "limit": {
                              "type": "number",
                              "minimum": 1,
                              "maximum": 100
                            },
                            "total": {
                              "type": "number",
                              "minimum": 0
                            },
                            "totalPages": {
                              "type": "number",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "page",
                            "limit",
                            "total",
                            "totalPages"
                          ]
                        }
                      },
                      "required": [
                        "logs",
                        "pagination"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/loyalty/points/award": {
      "post": {
        "tags": [
          "Loyalty Points"
        ],
        "description": "Award points to a user manually. Used for promotional points, customer service adjustments, or manual corrections.\n\n**Permissions:** ðŸŸ¢ `loyalty.create`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "number",
                    "description": "User ID to award points to"
                  },
                  "loyaltyProgramId": {
                    "type": "number",
                    "description": "Loyalty program ID"
                  },
                  "points": {
                    "type": "number",
                    "minimum": 1,
                    "description": "Number of points to award (must be positive)"
                  },
                  "description": {
                    "type": "string",
                    "description": "Reason for awarding points"
                  },
                  "metadata": {
                    "type": "object",
                    "additionalProperties": true,
                    "description": "Optional metadata for tracking"
                  }
                },
                "required": [
                  "userId",
                  "loyaltyProgramId",
                  "points",
                  "description"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Points awarded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "transactionId": {
                          "type": "number",
                          "description": "Transaction ID"
                        },
                        "points": {
                          "type": "number",
                          "description": "Points involved in the transaction"
                        },
                        "description": {
                          "type": "string",
                          "description": "Transaction description"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Transaction creation timestamp"
                        }
                      },
                      "required": [
                        "transactionId",
                        "points",
                        "description",
                        "createdAt"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/loyalty/points/deduct": {
      "post": {
        "tags": [
          "Loyalty Points"
        ],
        "description": "Deduct points from a user. Used for manual adjustments or corrections. For redemptions, use the redemption endpoints.\n\n**Permissions:** ðŸŸ¢ `loyalty.create`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "number",
                    "description": "User ID to deduct points from"
                  },
                  "loyaltyProgramId": {
                    "type": "number",
                    "description": "Loyalty program ID"
                  },
                  "points": {
                    "type": "number",
                    "minimum": 1,
                    "description": "Number of points to deduct (must be positive)"
                  },
                  "description": {
                    "type": "string",
                    "description": "Reason for deducting points"
                  },
                  "metadata": {
                    "type": "object",
                    "additionalProperties": true,
                    "description": "Optional metadata for tracking"
                  }
                },
                "required": [
                  "userId",
                  "loyaltyProgramId",
                  "points",
                  "description"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Points deducted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "transactionId": {
                          "type": "number",
                          "description": "Transaction ID"
                        },
                        "points": {
                          "type": "number",
                          "description": "Points involved in the transaction"
                        },
                        "description": {
                          "type": "string",
                          "description": "Transaction description"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Transaction creation timestamp"
                        }
                      },
                      "required": [
                        "transactionId",
                        "points",
                        "description",
                        "createdAt"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/loyalty/points/process-purchase": {
      "post": {
        "tags": [
          "Loyalty Points"
        ],
        "description": "Process points from a purchase. Called after a purchase is completed to calculate and award earned points based on earning rules.\n\n**Permissions:** ðŸŸ¢ `loyalty.create`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "number",
                    "description": "User ID who made the purchase"
                  },
                  "loyaltyProgramId": {
                    "type": "number",
                    "description": "Loyalty program ID"
                  },
                  "purchaseId": {
                    "type": "number",
                    "description": "Purchase ID to process"
                  },
                  "purchaseAmountCents": {
                    "type": "number",
                    "description": "Total purchase amount in cents"
                  },
                  "itemIds": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "description": "Array of item IDs in the purchase (for item-based earning rules)"
                  }
                },
                "required": [
                  "userId",
                  "loyaltyProgramId",
                  "purchaseId",
                  "purchaseAmountCents"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Purchase processed (no points earned)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "pointsAwarded": {
                          "type": "number",
                          "description": "Points awarded (0 if none earned)"
                        },
                        "message": {
                          "type": "string",
                          "description": "Explanation message"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "201": {
            "description": "Points awarded for purchase",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "transactionId": {
                          "type": "number",
                          "description": "Transaction ID"
                        },
                        "pointsAwarded": {
                          "type": "number",
                          "description": "Points awarded"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Transaction timestamp"
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/loyalty/points/estimate": {
      "post": {
        "tags": [
          "Loyalty Points"
        ],
        "description": "Estimate points that would be earned from a purchase. Used to display earning preview at checkout before the purchase is committed. No authentication required - called from storefront.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "loyaltyProgramId": {
                    "type": "number",
                    "description": "Loyalty program ID"
                  },
                  "purchaseAmountCents": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Estimated purchase amount in cents"
                  },
                  "itemIds": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "description": "Array of item IDs in the cart (for item-based earning rules)"
                  },
                  "userTierId": {
                    "type": "number",
                    "nullable": true,
                    "description": "User tier ID for tier-specific multipliers (optional)"
                  }
                },
                "required": [
                  "loyaltyProgramId",
                  "purchaseAmountCents"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Points estimate calculated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "estimatedPoints": {
                          "type": "number",
                          "description": "Total estimated points (with multipliers)"
                        },
                        "basePoints": {
                          "type": "number",
                          "description": "Base points before multipliers"
                        },
                        "appliedRules": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number",
                                "description": "Rule ID"
                              },
                              "name": {
                                "type": "string",
                                "description": "Rule name"
                              },
                              "ruleType": {
                                "type": "string",
                                "enum": [
                                  "SPEND_BASED",
                                  "ITEM_BASED"
                                ],
                                "description": "Type of earning rule"
                              },
                              "pointsAwarded": {
                                "type": "number",
                                "description": "Points from this rule"
                              }
                            }
                          },
                          "description": "List of earning rules applied"
                        },
                        "activeMultiplier": {
                          "type": "number",
                          "nullable": true,
                          "description": "Active multiplier (if any double points promotion is active)"
                        }
                      },
                      "required": [
                        "estimatedPoints",
                        "basePoints",
                        "appliedRules"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/internal/v1/loyalty/programs/{programId}/process-tier-progressions": {
      "post": {
        "tags": [
          "Internal"
        ],
        "description": "Process tier progressions for a loyalty program. Called by scheduled cloud function to evaluate and update member tiers based on their points/spending.",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "programId",
            "required": true,
            "description": "Loyalty program ID"
          }
        ],
        "x-internal": true,
        "responses": {
          "200": {
            "description": "Tier progressions processed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "programId": {
                          "type": "number",
                          "description": "Loyalty program ID processed"
                        },
                        "progressionsProcessed": {
                          "type": "number",
                          "description": "Number of member tier changes processed"
                        }
                      },
                      "required": [
                        "programId",
                        "progressionsProcessed"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/internal/v1/loyalty/points/expire": {
      "post": {
        "tags": [
          "Internal"
        ],
        "description": "Expire loyalty points that have exceeded their validity period. Called by scheduled cloud function to clean up expired points across all programs.",
        "x-internal": true,
        "responses": {
          "200": {
            "description": "Points expiration processed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "expiredCount": {
                          "type": "number",
                          "description": "Number of point transactions expired"
                        }
                      },
                      "required": [
                        "expiredCount"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/internal/v1/loyalty/points/process-purchase": {
      "post": {
        "tags": [
          "Internal"
        ],
        "description": "Process purchase points from payment event. Called by cf-handle-tab-payment-received cloud function to award loyalty points after successful payment.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "purchaseIntentId": {
                    "type": "string",
                    "description": "Purchase intent ID from payment"
                  },
                  "locationId": {
                    "type": "number",
                    "description": "Location ID where purchase was made"
                  },
                  "amountCents": {
                    "type": "number",
                    "description": "Purchase amount in cents"
                  },
                  "itemIds": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "description": "Item IDs in the purchase (for item-based rules)"
                  }
                },
                "required": [
                  "purchaseIntentId",
                  "locationId",
                  "amountCents"
                ]
              }
            }
          },
          "required": true
        },
        "x-internal": true,
        "responses": {
          "200": {
            "description": "Purchase processed (no points awarded)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "pointsAwarded": {
                          "type": "number",
                          "description": "Points awarded (0 if not applicable)"
                        },
                        "message": {
                          "type": "string",
                          "description": "Explanation of result"
                        }
                      },
                      "required": [
                        "pointsAwarded"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "201": {
            "description": "Points awarded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "transactionId": {
                          "type": "number",
                          "description": "Points transaction ID"
                        },
                        "pointsAwarded": {
                          "type": "number",
                          "description": "Number of points awarded"
                        },
                        "balanceAfter": {
                          "type": "number",
                          "description": "User points balance after award"
                        }
                      },
                      "required": [
                        "transactionId",
                        "pointsAwarded",
                        "balanceAfter"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/{locationId}/hierarchy": {
      "get": {
        "tags": [
          "Locations"
        ],
        "description": "Get the location hierarchy tree starting from a specific location. Returns the location and all its descendants in a tree structure.\n\n**Permissions:** ðŸ”µ `locations.read`",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "locationId",
            "required": true,
            "description": "Root location ID to get hierarchy for"
          }
        ],
        "responses": {
          "200": {
            "description": "Location hierarchy retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number",
                          "description": "Location ID"
                        },
                        "name": {
                          "type": "string",
                          "description": "Location name"
                        },
                        "type": {
                          "type": "string",
                          "nullable": true,
                          "description": "Location type (restaurant, kitchen, etc.)"
                        },
                        "level": {
                          "type": "number",
                          "description": "Hierarchy level (0 = root)"
                        },
                        "children": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number"
                              },
                              "name": {
                                "type": "string"
                              },
                              "type": {
                                "type": "string",
                                "nullable": true
                              },
                              "level": {
                                "type": "number"
                              }
                            }
                          },
                          "description": "Child locations"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "level"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                },
                "example": {
                  "status": "success",
                  "data": {
                    "id": 100,
                    "name": "Main Restaurant",
                    "type": "restaurant",
                    "level": 0,
                    "children": [
                      {
                        "id": 101,
                        "name": "Kitchen 1",
                        "type": "kitchen",
                        "level": 1
                      },
                      {
                        "id": 102,
                        "name": "Bar",
                        "type": "bar",
                        "level": 1
                      }
                    ]
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 15
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/{locationId}/set-parent": {
      "post": {
        "tags": [
          "Locations"
        ],
        "description": "Set or change the parent location for a location. This updates the location hierarchy and refreshes the materialized access view.\n\n**Permissions:** ðŸŸ  `locations.update`",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "parentLocationId": {
                    "type": "number",
                    "nullable": true,
                    "description": "Parent location ID (null to make root location)"
                  }
                },
                "required": [
                  "parentLocationId"
                ]
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "locationId",
            "required": true,
            "description": "Location ID to update"
          }
        ],
        "responses": {
          "200": {
            "description": "Location parent updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "success"
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number",
                          "description": "Location ID"
                        },
                        "name": {
                          "type": "string",
                          "description": "Location name"
                        },
                        "parentLocationId": {
                          "type": "number",
                          "nullable": true,
                          "description": "New parent location ID"
                        },
                        "hierarchyMetadata": {
                          "type": "object",
                          "properties": {
                            "level": {
                              "type": "number",
                              "description": "Hierarchy level"
                            },
                            "path": {
                              "type": "array",
                              "items": {
                                "type": "number"
                              },
                              "description": "Array of location IDs from root to this location"
                            },
                            "is_root": {
                              "type": "boolean",
                              "description": "Whether this is a root location"
                            }
                          },
                          "description": "Updated hierarchy metadata"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "data",
                    "meta"
                  ]
                },
                "example": {
                  "status": "success",
                  "data": {
                    "id": 101,
                    "name": "Kitchen 1",
                    "parentLocationId": 100,
                    "hierarchyMetadata": {
                      "level": 1,
                      "path": [
                        100,
                        101
                      ],
                      "is_root": false
                    }
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 25
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid input parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_INPUT",
                    "message": "Invalid request parameters"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 5
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid API key",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INVALID_API_KEY",
                    "message": "Invalid API key provided"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 3
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INSUFFICIENT_PERMISSIONS",
                    "message": "You do not have permission to access this resource"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 4
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "The requested resource was not found"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 2
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "RATE_LIMIT_EXCEEDED",
                    "message": "Rate limit exceeded. Please try again later."
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 1
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "error"
                      ]
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string"
                        },
                        "message": {
                          "type": "string"
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": true
                        }
                      },
                      "required": [
                        "code",
                        "message"
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "requestId": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "executionTimeMs": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "requestId",
                        "timestamp",
                        "executionTimeMs"
                      ]
                    }
                  },
                  "required": [
                    "status",
                    "error",
                    "meta"
                  ]
                },
                "example": {
                  "status": "error",
                  "error": {
                    "code": "INTERNAL_SERVER_ERROR",
                    "message": "An unexpected error occurred"
                  },
                  "meta": {
                    "requestId": "req_123456",
                    "timestamp": "2025-01-15T10:30:00.000Z",
                    "executionTimeMs": 10
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "https://common-api.karma.life",
      "description": "Production"
    },
    {
      "url": "https://common-api.beta.karma.life",
      "description": "Beta"
    },
    {
      "url": "https://common-api.development.karma.life",
      "description": "Development"
    }
  ],
  "security": [
    {
      "apiKey": []
    },
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Inventory",
      "description": "Manage inventory items and availability"
    },
    {
      "name": "Orders",
      "description": "Order management and kitchen dispatch"
    },
    {
      "name": "Tabs",
      "description": "Tab and session management"
    },
    {
      "name": "Locations",
      "description": "Location configuration and hierarchy"
    },
    {
      "name": "Loyalty",
      "description": "Loyalty programs and rewards"
    },
    {
      "name": "Loyalty Points",
      "description": "Points management and transactions"
    },
    {
      "name": "Webhooks",
      "description": "Webhook subscriptions and delivery"
    },
    {
      "name": "API Keys",
      "description": "API key management"
    },
    {
      "name": "Internal",
      "description": "Internal endpoints (not for external use)"
    }
  ]
}